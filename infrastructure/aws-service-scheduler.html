<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AWS Service Scheduler | AS Cloud Docs</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link href="https://common.northwestern.edu/v8/icons/favicon-16.png" rel="icon" sizes="16x16" type="image/png">
    <link href="https://common.northwestern.edu/v8/icons/favicon-32.png" rel="icon" sizes="32x32" type="image/png">
    <meta name="description" content="Docs for Northwestern IT staff on our cloud implementation.">
    <link rel="preload" href="/AS-CloudDocs/assets/css/0.styles.66b7ce55.css" as="style"><link rel="preload" href="/AS-CloudDocs/assets/js/app.7c4b6c5b.js" as="script"><link rel="preload" href="/AS-CloudDocs/assets/js/2.542323c2.js" as="script"><link rel="preload" href="/AS-CloudDocs/assets/js/33.8f326431.js" as="script"><link rel="prefetch" href="/AS-CloudDocs/assets/js/10.9c3425ea.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/11.ac0cecc6.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/12.6bd0e6ba.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/13.9ca59192.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/14.e57694b1.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/15.89cc6230.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/16.e55c84ba.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/17.4c7d7f3a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/18.7afbb7e8.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/19.c0166409.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/20.3d997d9c.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/21.9c8b6104.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/22.6436862a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/23.4fc19cec.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/24.7df3799d.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/25.61a7df8a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/26.7558c1a5.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/27.63bd6ea2.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/28.055ebb0b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/29.a5382a9b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/3.f29b8e39.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/30.f9ce488b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/31.26a400c3.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/32.c770c34a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/34.84ff26a4.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/35.75b0d681.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/36.1e82fcff.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/37.1b4b47bf.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/38.431607e7.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/39.70913066.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/4.0eba8a6a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/40.343909fa.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/41.dc1656de.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/42.5d3404e4.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/43.c442575a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/44.e29015d5.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/5.7da5a2df.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/6.1247cfd9.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/7.756be9c0.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/8.82adb3b5.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/9.40a788ea.js">
    <link rel="stylesheet" href="/AS-CloudDocs/assets/css/0.styles.66b7ce55.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AS-CloudDocs/" class="home-link router-link-active"><!----> <span class="site-name">AS Cloud Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/AS-CloudDocs/roles-responsibilities.html" class="sidebar-link">Roles &amp; Responsibilities</a></li><li><a href="/AS-CloudDocs/design-for-cloud.html" class="sidebar-link">Designing Apps for the Cloud</a></li><li><a href="/AS-CloudDocs/tools.html" class="sidebar-link">Tool Recommendations</a></li><li><a href="/AS-CloudDocs/docs-site.html" class="sidebar-link">Documentation Site</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Infrastructure</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/infrastructure/aws-account-design.html" class="sidebar-link">AWS Account Structure</a></li><li><a href="/AS-CloudDocs/infrastructure/tagging.html" class="sidebar-link">Tagging Resources</a></li><li><a href="/AS-CloudDocs/infrastructure/vpc-ip-addr.html" class="sidebar-link">VPCs &amp; IP Addressing</a></li><li><a href="/AS-CloudDocs/infrastructure/alb.html" class="sidebar-link">Application Load Balancers</a></li><li><a href="/AS-CloudDocs/infrastructure/certificates.html" class="sidebar-link">Certificates</a></li><li><a href="/AS-CloudDocs/infrastructure/api-gateway.html" class="sidebar-link">API Gateway</a></li><li><a href="/AS-CloudDocs/infrastructure/lambda.html" class="sidebar-link">Lambda</a></li><li><a href="/AS-CloudDocs/infrastructure/ecs-fargate.html" class="sidebar-link">Fargate for ECS</a></li><li><a href="/AS-CloudDocs/infrastructure/ses.html" class="sidebar-link">Simple Email Service (SES)</a></li><li><a href="/AS-CloudDocs/infrastructure/iam.html" class="sidebar-link">Identity &amp; Access Management (IAM)</a></li><li><a href="/AS-CloudDocs/infrastructure/databases.html" class="sidebar-link">Databases</a></li><li><a href="/AS-CloudDocs/infrastructure/secrets.html" class="sidebar-link">Secret Management</a></li><li><a href="/AS-CloudDocs/infrastructure/alerts.html" class="sidebar-link">Alerts</a></li><li><a href="/AS-CloudDocs/infrastructure/cloudfront.html" class="sidebar-link">CloudFront CDN</a></li><li><a href="/AS-CloudDocs/infrastructure/vapor.html" class="sidebar-link">Laravel Vapor</a></li><li><a href="/AS-CloudDocs/infrastructure/aws-service-scheduler.html" aria-current="page" class="active sidebar-link">AWS Service Scheduler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AS-CloudDocs/infrastructure/aws-service-scheduler.html#supported-aws-resources" class="sidebar-link">Supported AWS Resources</a></li><li class="sidebar-sub-header"><a href="/AS-CloudDocs/infrastructure/aws-service-scheduler.html#supported-aws-accounts" class="sidebar-link">Supported AWS Accounts</a></li><li class="sidebar-sub-header"><a href="/AS-CloudDocs/infrastructure/aws-service-scheduler.html#how-to-schedule-your-resources" class="sidebar-link">How To Schedule Your Resources</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Infrastructure as Code</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/iac/terraform-concepts.html" class="sidebar-link">Terraform</a></li><li><a href="/AS-CloudDocs/iac/as-tf-modules.html" class="sidebar-link">AS Terraform Modules</a></li><li><a href="/AS-CloudDocs/iac/example-tf.html" class="sidebar-link">Example Terraform Module</a></li><li><a href="/AS-CloudDocs/iac/available-modules.html" class="sidebar-link">Available Modules</a></li><li><a href="/AS-CloudDocs/iac/state-buckets.html" class="sidebar-link">State Bucket Reference</a></li><li><a href="/AS-CloudDocs/iac/tf-import.html" class="sidebar-link">Terraform Import</a></li><li><a href="/AS-CloudDocs/iac/tf-move.html" class="sidebar-link">Terraform State Move</a></li><li><a href="/AS-CloudDocs/iac/tf-upgrading.html" class="sidebar-link">Upgrading Terraform</a></li><li><a href="/AS-CloudDocs/iac/faq.html" class="sidebar-link">Frequently Asked Questions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CI &amp; CD</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/ci-cd/jenkins.html" class="sidebar-link">Jenkins Pipelines</a></li><li><a href="/AS-CloudDocs/ci-cd/shared-libs.html" class="sidebar-link">Shared Library</a></li><li><a href="/AS-CloudDocs/ci-cd/jenkins-ecs-agent.html" class="sidebar-link">Jenkins ECS Agent</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Application Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/development/principles.html" class="sidebar-link">Design Principles</a></li><li><a href="/AS-CloudDocs/development/app-patterns.html" class="sidebar-link">Application Patterns</a></li><li><a href="/AS-CloudDocs/development/libraries.html" class="sidebar-link">Packages &amp; Libraries</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GitHub</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/github/settings-permissions.html" class="sidebar-link">Settings &amp; Permissions</a></li><li><a href="/AS-CloudDocs/github/repo-layout.html" class="sidebar-link">Repository Structure</a></li><li><a href="/AS-CloudDocs/github/workflow.html" class="sidebar-link">Workflow</a></li><li><a href="/AS-CloudDocs/github/policies.html" class="sidebar-link">Policy</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="aws-service-scheduler"><a href="#aws-service-scheduler" class="header-anchor">#</a> AWS Service Scheduler</h1> <p>For cost savings, we recommend stopping AWS services in the lower environments during periods of unuse. For example, if an EC2 instance is only used for development purposes during business hours, stopping it over nights and weekends yields significant savings.</p> <p>The AS AWS Service Scheduler utility enables you to easily stop/start supported AWS services on a schedule via tags.</p> <h2 id="supported-aws-resources"><a href="#supported-aws-resources" class="header-anchor">#</a> Supported AWS Resources</h2> <table><thead><tr><th>Service</th> <th>Resource Type</th> <th>Regions</th></tr></thead> <tbody><tr><td>EC2</td> <td>Instance</td> <td>us-east-2, us-east-1</td></tr></tbody></table> <p>For stopping and starting ECS Fargate Services, see the <a href="./ecs-fargate#using-scheduled-scaling-for-cost-savings">ECS Fargate documentation</a> on Scheduled Scaling for Cost Savings.</p> <p>To request support for other AWS services or regions, please submit a request to EACD for evaluation.</p> <h2 id="supported-aws-accounts"><a href="#supported-aws-accounts" class="header-anchor">#</a> Supported AWS Accounts</h2> <p>The Service Scheduler is only available in non-production accounts:</p> <table><thead><tr><th>AWS Account</th> <th>Service Scheduler</th></tr></thead> <tbody><tr><td>ADO Sandbox</td> <td>Yes</td></tr> <tr><td>ADO Nonprod</td> <td>Yes</td></tr> <tr><td>ADO Prod</td> <td>No</td></tr> <tr><td>DMA Sandbox</td> <td>Yes</td></tr> <tr><td>DMA Nonprod</td> <td>Yes</td></tr> <tr><td>DMA Prod</td> <td>No</td></tr></tbody></table> <h2 id="how-to-schedule-your-resources"><a href="#how-to-schedule-your-resources" class="header-anchor">#</a> How To Schedule Your Resources</h2> <h3 id="method-1-preset-schedule-tags-recommended"><a href="#method-1-preset-schedule-tags-recommended" class="header-anchor">#</a> Method 1: Preset Schedule Tags (recommended)</h3> <p>Add a tag to your Terraform resource:</p> <table><thead><tr><th>Tag Name</th> <th>Tag Value</th></tr></thead> <tbody><tr><td>ServiceScheduler</td> <td>See the predefined schedules below.</td></tr></tbody></table> <p>Example:</p> <div class="language-hcl extra-class"><pre class="language-hcl"><code><span class="token keyword">resource <span class="token type variable">&quot;aws_instance&quot;</span></span> <span class="token string">&quot;example&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">ami</span>           <span class="token punctuation">=</span> data.aws_ami.amazon-linux-<span class="token number">2.</span>id
  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
  ...

  <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
    <span class="token property">ServiceScheduler</span> <span class="token punctuation">=</span> <span class="token string">&quot;business_hours&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="available-preset-schedules"><a href="#available-preset-schedules" class="header-anchor">#</a> Available Preset Schedules</h3> <table><thead><tr><th>Name</th> <th>Service On Hours</th> <th>Terraform Tag Value</th></tr></thead> <tbody><tr><td>Business Hours</td> <td>M-F 8am-5pm</td> <td>business_hours</td></tr> <tr><td>Extended Business Hours</td> <td>M-F 6am-7pm</td> <td>extended_business_hours</td></tr> <tr><td>Weekdays Only</td> <td>Monday 5am - Friday 10pm</td> <td>weekdays_only</td></tr> <tr><td>Business Hours - Stop Only (manual start by developer)</td> <td>Stops M-F 5pm</td> <td>business_hours_stop</td></tr></tbody></table> <h3 id="method-2-customized-schedule-and-resources"><a href="#method-2-customized-schedule-and-resources" class="header-anchor">#</a> Method 2: Customized schedule and resources</h3> <ol><li>In your IaC, leverage Terraform remote state to get the stop_lambda_arn and start_lambda_arn output for our Lambda functions. Create CloudWatch rules invoking our STOP and START Lambda functions on your own schedule.</li> <li>The input event can specify a list of tags and/or a list of resource arns:
<ul><li>For search tags provided, the lambda will search for resources with ALL of the specified search tags and start or stop them (regardless of ARNs provided)
<ul><li><strong>DO NOT provide a list of generic tags</strong>: You are responsible for specifying search tags specific to only your application. For instance, if you only specify &quot;Environment&quot;: &quot;dev&quot; in the search tags, you will stop all resources in the account with that tag and not just your application. Use with caution!</li></ul></li> <li>For resource ARNs provided, the lambda will start or stop each ARN (regardless of tags provided)</li></ul></li></ol> <p>Example Input Event:</p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;searchTags&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// use tags specific to your services</span>
        <span class="token property">&quot;Application&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MY EXAMPLE API&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Environment&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sbx&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resourceArns&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;arn:aws:ec2:region:account:instance/instance_1234&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;arn:aws:ec2:region:account:instance/instance_4321&quot;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs/edit/stable/infrastructure/aws-service-scheduler.md" target="_blank" rel="noopener noreferrer">Edit Page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">2/17/2021, 5:11:00 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/AS-CloudDocs/infrastructure/vapor.html" class="prev">
        Laravel Vapor
      </a></span> <span class="next"><a href="/AS-CloudDocs/iac/terraform-concepts.html">
        Terraform
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/AS-CloudDocs/assets/js/app.7c4b6c5b.js" defer></script><script src="/AS-CloudDocs/assets/js/2.542323c2.js" defer></script><script src="/AS-CloudDocs/assets/js/33.8f326431.js" defer></script>
  </body>
</html>
