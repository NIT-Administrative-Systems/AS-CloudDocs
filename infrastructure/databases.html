<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Databases | AS Cloud Docs</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link href="https://common.northwestern.edu/v8/icons/favicon-16.png" rel="icon" sizes="16x16" type="image/png">
    <link href="https://common.northwestern.edu/v8/icons/favicon-32.png" rel="icon" sizes="32x32" type="image/png">
    <meta name="description" content="Docs for Northwestern IT staff on our cloud implementation.">
    
    <link rel="preload" href="/AS-CloudDocs/assets/css/0.styles.425dfd68.css" as="style"><link rel="preload" href="/AS-CloudDocs/assets/js/app.95e75358.js" as="script"><link rel="preload" href="/AS-CloudDocs/assets/js/2.ff94c51f.js" as="script"><link rel="preload" href="/AS-CloudDocs/assets/js/41.b7820605.js" as="script"><link rel="prefetch" href="/AS-CloudDocs/assets/js/10.53b10353.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/11.30bf3f27.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/12.79b15561.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/13.0fa5fac8.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/14.c790e2d3.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/15.a8c5260a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/16.f0d2bf79.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/17.dd30171a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/18.9efddfc8.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/19.42954703.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/20.94487fbf.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/21.c16e1282.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/22.97eb51d7.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/23.a8dd56a2.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/24.503ed3ba.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/25.981cecb9.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/26.bfd5357b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/27.c3671dd8.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/28.d3fc2301.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/29.fc446122.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/3.21e484c9.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/30.089c61e7.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/31.306f3f98.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/32.24d50834.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/33.c184c935.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/34.7bbea69d.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/35.a080084a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/36.64d9b7ab.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/37.b31cf584.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/38.dca1db31.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/39.965c08d4.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/4.ecf3366a.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/40.b204b1ef.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/42.bc43f9c4.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/43.0a80f6c0.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/44.f22535a7.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/45.f313f02b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/46.c54a93c3.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/47.66ca5d4b.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/48.95c5b0f8.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/49.c4bb334d.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/5.01c67336.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/50.1f409d90.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/6.9dbf8cb2.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/7.6d8aeef3.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/8.1d84efc4.js"><link rel="prefetch" href="/AS-CloudDocs/assets/js/9.d62c08d3.js">
    <link rel="stylesheet" href="/AS-CloudDocs/assets/css/0.styles.425dfd68.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/AS-CloudDocs/" class="home-link router-link-active"><!----> <span class="site-name">AS Cloud Docs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/" aria-current="page" class="sidebar-link">Overview</a></li><li><a href="/AS-CloudDocs/roles-responsibilities.html" class="sidebar-link">Roles &amp; Responsibilities</a></li><li><a href="/AS-CloudDocs/design-for-cloud.html" class="sidebar-link">Designing Apps for the Cloud</a></li><li><a href="/AS-CloudDocs/tools.html" class="sidebar-link">Tool Recommendations</a></li><li><a href="/AS-CloudDocs/docs-site.html" class="sidebar-link">Documentation Site</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Infrastructure</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/infrastructure/aws-account-design.html" class="sidebar-link">AWS Account Structure</a></li><li><a href="/AS-CloudDocs/infrastructure/tagging.html" class="sidebar-link">Tagging Resources</a></li><li><a href="/AS-CloudDocs/infrastructure/vpc-ip-addr.html" class="sidebar-link">VPCs &amp; IP Addressing</a></li><li><a href="/AS-CloudDocs/infrastructure/alb.html" class="sidebar-link">Application Load Balancers</a></li><li><a href="/AS-CloudDocs/infrastructure/certificates.html" class="sidebar-link">Certificates</a></li><li><a href="/AS-CloudDocs/infrastructure/api-gateway.html" class="sidebar-link">API Gateway</a></li><li><a href="/AS-CloudDocs/infrastructure/lambda.html" class="sidebar-link">Lambda</a></li><li><a href="/AS-CloudDocs/infrastructure/ecs-fargate.html" class="sidebar-link">Fargate for ECS</a></li><li><a href="/AS-CloudDocs/infrastructure/ses.html" class="sidebar-link">Simple Email Service (SES)</a></li><li><a href="/AS-CloudDocs/infrastructure/iam.html" class="sidebar-link">Identity &amp; Access Management (IAM)</a></li><li><a href="/AS-CloudDocs/infrastructure/databases.html" aria-current="page" class="active sidebar-link">Databases</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/AS-CloudDocs/infrastructure/databases.html#dynamodb" class="sidebar-link">DynamoDB</a></li><li class="sidebar-sub-header"><a href="/AS-CloudDocs/infrastructure/databases.html#relational-database-service-rds" class="sidebar-link">Relational Database Service (RDS)</a></li></ul></li><li><a href="/AS-CloudDocs/infrastructure/secrets.html" class="sidebar-link">Secret Management</a></li><li><a href="/AS-CloudDocs/infrastructure/alerts.html" class="sidebar-link">Alerts</a></li><li><a href="/AS-CloudDocs/infrastructure/cloudfront.html" class="sidebar-link">CloudFront CDN</a></li><li><a href="/AS-CloudDocs/infrastructure/vapor.html" class="sidebar-link">Laravel Vapor</a></li><li><a href="/AS-CloudDocs/infrastructure/aws-service-scheduler.html" class="sidebar-link">AWS Service Scheduler</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Infrastructure as Code</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/iac/terraform-concepts.html" class="sidebar-link">Terraform</a></li><li><a href="/AS-CloudDocs/iac/as-tf-modules.html" class="sidebar-link">AS Terraform Modules</a></li><li><a href="/AS-CloudDocs/iac/example-tf.html" class="sidebar-link">Example Terraform Module</a></li><li><a href="/AS-CloudDocs/iac/available-modules.html" class="sidebar-link">Available Modules</a></li><li><a href="/AS-CloudDocs/iac/state-buckets.html" class="sidebar-link">State Bucket Reference</a></li><li><a href="/AS-CloudDocs/iac/tf-import.html" class="sidebar-link">Terraform Import</a></li><li><a href="/AS-CloudDocs/iac/tf-move.html" class="sidebar-link">Terraform State Move</a></li><li><a href="/AS-CloudDocs/iac/tf-upgrading.html" class="sidebar-link">Upgrading Terraform</a></li><li><a href="/AS-CloudDocs/iac/faq.html" class="sidebar-link">Frequently Asked Questions</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CI &amp; CD</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/ci-cd/jenkins.html" class="sidebar-link">Jenkins Pipelines</a></li><li><a href="/AS-CloudDocs/ci-cd/shared-libs.html" class="sidebar-link">Shared Library</a></li><li><a href="/AS-CloudDocs/ci-cd/jenkins-ecs-agent.html" class="sidebar-link">Jenkins ECS Agent</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Application Development</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/development/principles.html" class="sidebar-link">Design Principles</a></li><li><a href="/AS-CloudDocs/development/app-patterns.html" class="sidebar-link">Application Patterns</a></li><li><a href="/AS-CloudDocs/development/laravel-stack.html" class="sidebar-link">Laravel Stack</a></li><li><a href="/AS-CloudDocs/development/express-stack.html" class="sidebar-link">ExpressJS Stack</a></li><li><a href="/AS-CloudDocs/development/spring-stack.html" class="sidebar-link">Spring Stack</a></li><li><a href="/AS-CloudDocs/development/frontend-stacks.html" class="sidebar-link">Frontend Stacks</a></li><li><a href="/AS-CloudDocs/development/libraries.html" class="sidebar-link">Packages &amp; Libraries</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>GitHub</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/AS-CloudDocs/github/settings-permissions.html" class="sidebar-link">Settings &amp; Permissions</a></li><li><a href="/AS-CloudDocs/github/repo-layout.html" class="sidebar-link">Repository Structure</a></li><li><a href="/AS-CloudDocs/github/workflow.html" class="sidebar-link">Workflow</a></li><li><a href="/AS-CloudDocs/github/policies.html" class="sidebar-link">Policy</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="databases"><a href="#databases" class="header-anchor">#</a> Databases</h1> <p>AWS has <a href="https://aws.amazon.com/products/databases/" target="_blank" rel="noopener noreferrer">a number of options for databases<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, beyond even what this article will address. When choosing from the options below, or other AWS services not covered, there are three key things to consider:</p> <ul><li>Being mindful of the limitations Amazon imposes, <em>especially</em> for their serverless products</li> <li>Ensuring that you have an appropriate backup strategy in place</li> <li>Cost</li></ul> <h2 id="dynamodb"><a href="#dynamodb" class="header-anchor">#</a> DynamoDB</h2> <p><a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener noreferrer">DynamoDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is a serverless NoSQL key-value &amp; document store. When used correctly, it can automatically scale to handle extreme amounts of both traffic and data. There is very little set-up required, and AWS will manage backups &amp; restorations for you.</p> <p>You should not think of it as a cheap drop-in replacement for an RDBMS; it is fundementally different. DynamoDB is not a good fit if you need to do a rich faceted search or query relational data.</p> <p>Dynamo tables have two billing modes: you can pay-per-request, or you can reserve read &amp; write capacity units and receive a consistent monthly bill. For all of our applications so far, the pay-per-request option has been adequate.</p> <p>There are a number of restrictions that need to be factored in to your table design when building your application: Dynamo lets you have one primary key (composed of a partition key &amp; sort key), and a limited number of <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/SecondaryIndexes.html" target="_blank" rel="noopener noreferrer">secondary indexes<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. You need to get these indexes right when you are creating the table initially; modifying these once you have data is a complicated process that significant engineering time will be spent on.</p> <p><a href="https://www.trek10.com/blog/dynamodb-single-table-relational-modeling/" target="_blank" rel="noopener noreferrer">Forrest Brazeal wrote about converting a relational database to DynamoDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, which illustrates some of the limitations of DynamoDB.</p> <blockquote><p>DynamoDB is a powerful tool when used properly, but if you don’t know what you’re doing it’s a deceptively user-friendly guide into madness.</p></blockquote> <p>You should avoid doing <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Scan.html" target="_blank" rel="noopener noreferrer">table scans<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with DynamoDB. While scan queries support filtering, the filter is applied <em>after</em> the table scan -- so you are paying the full cost of reading all records before any filtering is applied. Repeatedly doing a scan against a table with thousand of rows will be expensive.</p> <p>To summerize, the AS recommendations for DynamoDB are:</p> <ul><li>Only use this if you have a deep understanding of your data access patterns</li> <li>Use pay-per-request until you have a demonstrated need to reserve capacity units</li> <li>Enable point-in-time recovery</li></ul> <h2 id="relational-database-service-rds"><a href="#relational-database-service-rds" class="header-anchor">#</a> Relational Database Service (RDS)</h2> <p>Amazon RDS has all your favorite flavours of RDBMS, plus Aurora with both MySQL &amp; Postgres compatability. RDS is an always-on service; even its serverless offering has a non-trivial cost.</p> <p>As a general recommendation, you should select Aurora Postgres for your RDBMS. If you are working with an existing application or open-source/vendor product that requires MySQL, that is an acceptable option as well. MS SQL Server is available and may be chosen if an application requires it, but additional license costs are rolled in to the price.</p> <p>Northwestern's Oracle license does not cover DBs running on AWS. While RDS offers Oracle, we do not use it under any circumstances.</p> <p>Aurora is a proprietary Amazon-developed RDBMS backend, which then has Postgres/MySQL as the &quot;front end&quot;. To developers and applications, Aurora is indistinguishable from a normal database. Behind the scenes, <a href="https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.Overview.html" target="_blank" rel="noopener noreferrer">data durability things<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> are happening.</p> <h3 id="traditional-rds"><a href="#traditional-rds" class="header-anchor">#</a> Traditional RDS</h3> <p>The traditional (as opposed to serverless) RDS product allows you to choose your EC2 size. Amazon has a DB-optimized series of compute nodes, and you build your cluster from these plus storage. You have a high degree of flexibility and customization for your DB config. For example, AWS supports <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_PostgreSQL.html#PostgreSQL.Concepts.General.FeatureSupport.Extensions.11x" target="_blank" rel="noopener noreferrer">most popular Postgres extensions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> out of the box, and these can be added to your database.</p> <p>With traditional RDS, developers will still be involved in DBA work: maintenance windows must be scheduled for reboots, config changes, certificate updates, and migration from unhealthy compute. These tasks are infrequent and easy to complete if the developer understands the problem, but they do take time away from <a href="/AS-CloudDocs/design-for-cloud.html#on-infrastructure">more productive work</a>.</p> <h3 id="aurora-serverless"><a href="#aurora-serverless" class="header-anchor">#</a> Aurora Serverless</h3> <p>Aurora Serverless uses Amazon's compute to power your Aurora RDBMS. It still behaves exactly like a normal Postgres/MySQL database.</p> <p>For most of our use-cases, there are very few downsides to choosing Aurora RDS over traditional RDS:</p> <ul><li>You cannot customize the DB config to the same degree as a traditional RDS database</li> <li>Instead of choosing your EC2 instances, you allocate capacity units, which are more difficult to predict when budgeting/cost forecasting</li></ul> <p>The upsides are compelling:</p> <ul><li>No developer involvement in maintenance</li> <li>No developer involvement in scaling (beyond setting a minimum/maximum)</li> <li>DBs that are not being used can be configured to scale down to 0 capacity units</li></ul> <h3 id="traditional-vs-serverless"><a href="#traditional-vs-serverless" class="header-anchor">#</a> Traditional vs. Serverless</h3> <p>Amazon recommends the <code>db.m5.large</code> instance type for a dev/QA RDS. Ignoring storage, this is ~$83/m for compute. You would ideally want two compute instances in QA/prod to avoid as much downtime as possible in your application, bringing the total for dev/qa/prod up to ~$420/month.</p> <p>You can use smaller compute notes for RDS, like a <code>db.t3.medium</code>. If you were to use these for dev/QA and keep the <code>db.m5.large</code> for production, your compute costs would be around $278.44/m.</p> <p>The minimum capacity units for an RDS Aurora Serverless DB is two, which will cost ~$87/month if run non-stop. You should be able to configure your dev/QA environments to stop when idle, costing nothing outside of business hours. With production being the only always-on environment, the total for dev/qa/prod should be $174/month.</p> <h3 id="summary"><a href="#summary" class="header-anchor">#</a> Summary</h3> <p>To summarize, the AS recommendations for RDS are:</p> <ul><li>Use this anywhere you'd use a relational DB</li> <li>RDS Aurora Serverless should be used unless you need additional control over your DB</li> <li>Configure your Aurora Serverless RDS clusters to sleep when they are inactive &amp; verify that is happening</li> <li>Enable automated backups &amp; set an appropriate retention period</li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/NIT-Administrative-Systems/AS-CloudDocs/edit/stable/infrastructure/databases.md" target="_blank" rel="noopener noreferrer">Edit Page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/11/2021, 5:13:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/AS-CloudDocs/infrastructure/iam.html" class="prev">
        Identity &amp; Access Management (IAM)
      </a></span> <span class="next"><a href="/AS-CloudDocs/infrastructure/secrets.html">
        Secret Management
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/AS-CloudDocs/assets/js/app.95e75358.js" defer></script><script src="/AS-CloudDocs/assets/js/2.ff94c51f.js" defer></script><script src="/AS-CloudDocs/assets/js/41.b7820605.js" defer></script>
  </body>
</html>
