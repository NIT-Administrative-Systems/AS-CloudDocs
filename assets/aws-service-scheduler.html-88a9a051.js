import{_ as e,p as s,q as t,a1 as a}from"./framework-bf3e1922.js";const n={},r=a(`<h1 id="aws-service-scheduler" tabindex="-1"><a class="header-anchor" href="#aws-service-scheduler" aria-hidden="true">#</a> AWS Service Scheduler</h1><p>For cost savings, we recommend stopping AWS services in the lower environments during periods of unuse. For example, if an EC2 instance is only used for development purposes during business hours, stopping it over nights and weekends yields significant savings.</p><p>The AS AWS Service Scheduler utility enables you to easily stop/start supported AWS services on a schedule via tags.</p><h2 id="supported-aws-resources" tabindex="-1"><a class="header-anchor" href="#supported-aws-resources" aria-hidden="true">#</a> Supported AWS Resources</h2><table><thead><tr><th>Service</th><th>Resource Type</th><th>Regions</th></tr></thead><tbody><tr><td>EC2</td><td>Instance</td><td>us-east-2, us-east-1</td></tr></tbody></table><p>For stopping and starting ECS Fargate Services, see the <a href="./ecs-fargate#using-scheduled-scaling-for-cost-savings">ECS Fargate documentation</a> on Scheduled Scaling for Cost Savings.</p><p>To request support for other AWS services or regions, please submit a request to EACD for evaluation.</p><h2 id="supported-aws-accounts" tabindex="-1"><a class="header-anchor" href="#supported-aws-accounts" aria-hidden="true">#</a> Supported AWS Accounts</h2><p>The Service Scheduler is only available in non-production accounts:</p><table><thead><tr><th>AWS Account</th><th>Service Scheduler</th></tr></thead><tbody><tr><td>ADO Sandbox</td><td>Yes</td></tr><tr><td>ADO Nonprod</td><td>Yes</td></tr><tr><td>ADO Prod</td><td>No</td></tr><tr><td>DMA Sandbox</td><td>Yes</td></tr><tr><td>DMA Nonprod</td><td>Yes</td></tr><tr><td>DMA Prod</td><td>No</td></tr></tbody></table><h2 id="how-to-schedule-your-resources" tabindex="-1"><a class="header-anchor" href="#how-to-schedule-your-resources" aria-hidden="true">#</a> How To Schedule Your Resources</h2><h3 id="method-1-preset-schedule-tags-recommended" tabindex="-1"><a class="header-anchor" href="#method-1-preset-schedule-tags-recommended" aria-hidden="true">#</a> Method 1: Preset Schedule Tags (recommended)</h3><p>Add a tag to your Terraform resource:</p><table><thead><tr><th>Tag Name</th><th>Tag Value</th></tr></thead><tbody><tr><td>ServiceScheduler</td><td>See the predefined schedules below.</td></tr></tbody></table><p>Example:</p><div class="language-hcl line-numbers-mode" data-ext="hcl"><pre class="language-hcl"><code><span class="token keyword">resource <span class="token type variable">&quot;aws_instance&quot;</span></span> <span class="token string">&quot;example&quot;</span> <span class="token punctuation">{</span>
  <span class="token property">ami</span>           <span class="token punctuation">=</span> data.aws_ami.amazon-linux-<span class="token number">2.</span>id
  <span class="token property">instance_type</span> <span class="token punctuation">=</span> <span class="token string">&quot;t2.micro&quot;</span>
  ...

  <span class="token property">tags</span> <span class="token punctuation">=</span> <span class="token punctuation">{</span>
    <span class="token property">ServiceScheduler</span> <span class="token punctuation">=</span> <span class="token string">&quot;business_hours&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="available-preset-schedules" tabindex="-1"><a class="header-anchor" href="#available-preset-schedules" aria-hidden="true">#</a> Available Preset Schedules</h3><table><thead><tr><th>Name</th><th>Service On Hours</th><th>Terraform Tag Value</th></tr></thead><tbody><tr><td>Business Hours</td><td>M-F 8am-5pm</td><td>business_hours</td></tr><tr><td>Extended Business Hours</td><td>M-F 6am-7pm</td><td>extended_business_hours</td></tr><tr><td>Weekdays Only</td><td>Monday 5am - Friday 10pm</td><td>weekdays_only</td></tr><tr><td>Business Hours - Stop Only (manual start by developer)</td><td>Stops M-F 5pm</td><td>business_hours_stop</td></tr></tbody></table><h3 id="method-2-customized-schedule-and-resources" tabindex="-1"><a class="header-anchor" href="#method-2-customized-schedule-and-resources" aria-hidden="true">#</a> Method 2: Customized schedule and resources</h3><ol><li>In your IaC, leverage Terraform remote state to get the stop_lambda_arn and start_lambda_arn output for our Lambda functions. Create CloudWatch rules invoking our STOP and START Lambda functions on your own schedule.</li><li>The input event can specify a list of tags and/or a list of resource arns: <ul><li>For search tags provided, the lambda will search for resources with ALL of the specified search tags and start or stop them (regardless of ARNs provided) <ul><li><strong>DO NOT provide a list of generic tags</strong>: You are responsible for specifying search tags specific to only your application. For instance, if you only specify &quot;Environment&quot;: &quot;dev&quot; in the search tags, you will stop all resources in the account with that tag and not just your application. Use with caution!</li></ul></li><li>For resource ARNs provided, the lambda will start or stop each ARN (regardless of tags provided)</li></ul></li></ol><p>Example Input Event:</p><div class="language-JSON line-numbers-mode" data-ext="JSON"><pre class="language-JSON"><code>{
    &quot;searchTags&quot;: { // use tags specific to your services
        &quot;Application&quot;: &quot;MY EXAMPLE API&quot;,
        &quot;Environment&quot;: &quot;sbx&quot;,
    },
    &quot;resourceArns&quot;: [
        &quot;arn:aws:ec2:region:account:instance/instance_1234&quot;,
        &quot;arn:aws:ec2:region:account:instance/instance_4321&quot;
    ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22),d=[r];function o(i,u){return s(),t("div",null,d)}const l=e(n,[["render",o],["__file","aws-service-scheduler.html.vue"]]);export{l as default};
