(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{379:function(e,t,s){"use strict";s.r(t);var r=s(41),a=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"expressjs-stack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#expressjs-stack"}},[e._v("#")]),e._v(" ExpressJS Stack")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Express"),s("OutboundLink")],1),e._v(" is the most popular web framework for Node. It can be "),s("a",{attrs:{href:"https://github.com/dougmoscrop/serverless-http",target:"_blank",rel:"noopener noreferrer"}},[e._v("adapted to run on Lambda"),s("OutboundLink")],1),e._v(", making this easy to run locally for development or on AWS for production.")]),e._v(" "),s("h2",{attrs:{id:"getting-started"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[e._v("#")]),e._v(" Getting Started")]),e._v(" "),s("p",[e._v("A template with an included IaC module for deploying to AWS is available "),s("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-serverless-nodejs-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("in the Northwestern github organization"),s("OutboundLink")],1),e._v(". This template is suitable for a microservice project.")]),e._v(" "),s("p",[e._v("You can create a new repository using this template from GitHub's new repository page.")]),e._v(" "),s("h2",{attrs:{id:"stack"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#stack"}},[e._v("#")]),e._v(" Stack")]),e._v(" "),s("p",[e._v("Express is a minimalistic framework. It does not bring its own opinions about libraries & design patterns to the table, leaving these up to the developer. Below are the libraries that are recommended for various purposes. When applicable to an application, these should be used.")]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("The Administrative Systems Seal of Approval")]),e._v(" "),s("p",[e._v('These serve as a good set of "default" options for things.')]),e._v(" "),s("p",[e._v("There may be use-cases where something else is better, but unless & until a justification can be made to use something else, you should draw from this list.")]),e._v(" "),s("p",[e._v("Using the same libraries will allow AS developers to transfer between projects more easily, as technical competencies developed in one project will be transferrable to other projects.")])]),e._v(" "),s("table",[s("thead",[s("tr",[s("th",[e._v("Package")]),e._v(" "),s("th",[e._v("Purpose")])])]),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("AWS Lambda")]),e._v(" "),s("td",[e._v("Platform")])]),e._v(" "),s("tr",[s("td",[e._v("AWS DynamoDB")]),e._v(" "),s("td",[e._v("Document DB, session store, cache")])]),e._v(" "),s("tr",[s("td",[e._v("PostgreSQL "),s("em",[e._v("(available as Aurora Serverless RDS for PostgreSQL on AWS)")])]),e._v(" "),s("td",[e._v("Relational DB")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/nusso-node",target:"_blank",rel:"noopener noreferrer"}},[e._v("nusso"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("WebSSO")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/ADO-SSO-node-express-example",target:"_blank",rel:"noopener noreferrer"}},[e._v("nusso express middleware"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("WebSSO")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/dougmoscrop/serverless-http",target:"_blank",rel:"noopener noreferrer"}},[e._v("serverless-http for Express"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("ExpressJS Lambda/API Gateway adapter")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://fontawesome.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Font Awesome"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("Icons")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://momentjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("moment.js"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("DateTime & timezone manipulation")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/google/libphonenumber#third-party-ports",target:"_blank",rel:"noopener noreferrer"}},[e._v("libphonenumber"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("Phone number info & validation")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/axios/axios",target:"_blank",rel:"noopener noreferrer"}},[e._v("Axios"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("HTTP client")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/oracle/node-oracledb",target:"_blank",rel:"noopener noreferrer"}},[e._v("node-oracledb"),s("OutboundLink")],1),e._v(" "),s("sup",[e._v("*")])]),e._v(" "),s("td",[e._v("Oracle DB driver")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://www.npmjs.com/package/@sentry/node",target:"_blank",rel:"noopener noreferrer"}},[e._v("@sentry/node"),s("OutboundLink")],1),e._v(" †")]),e._v(" "),s("td",[e._v("Error logging")])]),e._v(" "),s("tr",[s("td",[e._v("AirBnB eslint rules")]),e._v(" "),s("td",[e._v("Code style")])]),e._v(" "),s("tr",[s("td",[s("a",{attrs:{href:"https://github.com/expressjs/body-parser",target:"_blank",rel:"noopener noreferrer"}},[e._v("body parser"),s("OutboundLink")],1)]),e._v(" "),s("td",[e._v("Express middleware to parse HTTP request body")])])])]),e._v(" "),s("p",[s("small",[s("sup",[e._v("*")]),e._v(" See the "),s("a",{attrs:{href:"#oracle-on-aws-lambda"}},[e._v("section below")]),e._v(" on setting up the Oracle driver.")])]),e._v(" "),s("p",[s("small",[e._v("† Sentry recently released "),s("code",[e._v("@sentry/serverless")]),e._v(" for NodeJS on Lambda. This package has not yet been evaluated.")])]),e._v(" "),s("p",[e._v("There is currently no consensus on a JS testing framework. ADO has used the following successfully:")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://mochajs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Mocha"),s("OutboundLink")],1),e._v(", "),s("a",{attrs:{href:"https://www.chaijs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chai"),s("OutboundLink")],1),e._v(", & "),s("a",{attrs:{href:"https://istanbul.js.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Istanbul"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://jestjs.io/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Jest"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"code-style-linting"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#code-style-linting"}},[e._v("#")]),e._v(" Code Style & Linting")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("airbnb-base")]),e._v(" set of rules for eslint should be used to ensure source code is formatted the same and complies with the same set of rules.")]),e._v(" "),s("p",[e._v("The "),s("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-serverless-nodejs-api",target:"_blank",rel:"noopener noreferrer"}},[e._v("template repository"),s("OutboundLink")],1),e._v(" already has eslint set up. If you need to add this to an existing project:")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Add the packages as dev dependencies:")]),e._v(" "),s("p",[s("code",[e._v("yarn add --dev eslint eslint-config-airbnb-base eslint-plugin-import")])])]),e._v(" "),s("li",[s("p",[e._v("Create a "),s("code",[e._v(".eslintrc.js")]),e._v(" file in the root of your project:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"extends"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"airbnb-base"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"env"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"node"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"es6"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"mocha"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"rules"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"no-console"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"off"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"max-len"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"off"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Ensure your editor of choice has integration with eslint installed")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint",target:"_blank",rel:"noopener noreferrer"}},[e._v("VSCode ESLint extension"),s("OutboundLink")],1)])])])]),e._v(" "),s("h2",{attrs:{id:"oracle-on-aws-lambda"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#oracle-on-aws-lambda"}},[e._v("#")]),e._v(" Oracle on AWS Lambda")]),e._v(" "),s("p",[e._v("Oracle provides a node package wrapping their driver. Setting it up is not difficult, but it is more involved than a simple "),s("code",[e._v("yarn add")]),e._v(".")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("Create a "),s("code",[e._v("lib/")]),e._v(" folder, get "),s("a",{attrs:{href:"https://www.oracle.com/database/technologies/instant-client/downloads.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Oracle basic instant client for Linux"),s("OutboundLink")],1),e._v(", and unzip it.")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("lib/")]),e._v(" folder should have several "),s("code",[e._v(".so")]),e._v(" files in it now.")])]),e._v(" "),s("li",[s("p",[e._v("Add the highlighted "),s("code",[e._v("directories")]),e._v(" section below to your "),s("code",[e._v("package.json")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("div",{staticClass:"highlighted"},[e._v(" ")]),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"demo-project"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"0.0.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// etc etc")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"directories"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"lib"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lib"')]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])])]),e._v(" "),s("li",[s("p",[e._v("Add the "),s("a",{attrs:{href:"https://github.com/oracle/node-oracledb",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("oracledb")]),e._v(" package"),s("OutboundLink")],1),e._v(" as a dependency")]),e._v(" "),s("ul",[s("li",[e._v("Yarn will build the C++ extension against the instant client libs")])])]),e._v(" "),s("li",[s("p",[e._v("Add some env vars to the run scripts in the "),s("code",[e._v("package.json")]),e._v(" so the app looks for for the Oracle libs in "),s("code",[e._v("lib/")]),e._v(":")]),e._v(" "),s("p",[s("code",[e._v('cross-env PATH=\\"$PATH:./lib\\" LD_LIBRARY_PATH=\\"./lib\\" nodemon -L ./bin/www')])]),e._v(" "),s("p",[e._v("This example is launching the app with "),s("code",[e._v("nodemon")]),e._v(", but the command after the two env variables depends on how you are running your code.")])]),e._v(" "),s("li",[s("p",[e._v("Check the Linux "),s("code",[e._v("lib/")]),e._v(" into git")]),e._v(" "),s("p",[e._v("MacOS & Windows users could run this locally by adding their platform's Oracle drivers. It is not advisable to add the instantclient for Windows or MacOS to git, as the files are very large.")]),e._v(" "),s("blockquote",[s("p",[e._v("If you are on Windows or Mac, you will need to download the basic instant client zip file. On Windows, you can unpack it into the lib/ folder. On Mac, you will need to unpack it to ~/lib, outside of the project directory. On both operating systems, it should be automatically detected when you run the app.")])])])])])}),[],!1,null,null,null);t.default=a.exports}}]);