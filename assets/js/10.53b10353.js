(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{357:function(t,a,s){t.exports=s.p+"assets/img/laravel-app.e86f802c.png"},379:function(t,a,s){"use strict";s.r(a);var e=s(41),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"laravel-stack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#laravel-stack"}},[t._v("#")]),t._v(" Laravel Stack")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://laravel.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel"),e("OutboundLink")],1),t._v(" is an excellent choice for cloud applications. It is a modern framework with "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/events",target:"_blank",rel:"noopener noreferrer"}},[t._v("advanced"),e("OutboundLink")],1),t._v(" "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/broadcasting",target:"_blank",rel:"noopener noreferrer"}},[t._v("features"),e("OutboundLink")],1),t._v(", and it's easy to deploy on AWS with "),e("RouterLink",{attrs:{to:"/infrastructure/vapor.html"}},[t._v("Vapor")]),t._v(".")],1),t._v(" "),e("p",[t._v("Our general pattern for Laravel apps closely mirrors a new out-of-the-box Laravel installation. In cases where we are interacting with APIs heavily, we will make more use of the cache and implement a repository pattern around our models:")]),t._v(" "),e("p",[e("img",{attrs:{src:s(357),alt:"Laravel app structure"}})]),t._v(" "),e("h2",{attrs:{id:"stack"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#stack"}},[t._v("#")]),t._v(" Stack")]),t._v(" "),e("p",[t._v("Laravel provides most of the application stack.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("The Administrative Systems Seal of Approval")]),t._v(" "),e("p",[t._v('These serve as a good set of "default" options for things.')]),t._v(" "),e("p",[t._v("There may be use-cases where something else is better, but unless & until a justification can be made to use something else, you should draw from this list.")]),t._v(" "),e("p",[t._v("Using the same libraries will allow AS developers to transfer between projects more easily, as technical competencies developed in one project will be transferrable to other projects.")])]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Package")]),t._v(" "),e("th",[t._v("Purpose")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("PostgreSQL "),e("em",[t._v("(available as Aurora Serverless RDS for PostgreSQL on AWS)")])]),t._v(" "),e("td",[t._v("Relational DB")])]),t._v(" "),e("tr",[e("td",[t._v("AWS DynamoDB")]),t._v(" "),e("td",[t._v("Document DB, session store, cache")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel.com/docs/8.x/eloquent",target:"_blank",rel:"noopener noreferrer"}},[t._v("Eloquent"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("DB access / ORM")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://nit-administrative-systems.github.io/SysDev-laravel-soa/",target:"_blank",rel:"noopener noreferrer"}},[t._v("laravel-soa"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("WebSSO, common API bindings")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://docs.guzzlephp.org/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Guzzle"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("HTTP client")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://carbon.nesbot.com/docs/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Carbon"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("DateTime & timezone manipulation")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/google/libphonenumber#third-party-ports",target:"_blank",rel:"noopener noreferrer"}},[t._v("libphonenumber"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Phone number info & validation")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel.com/docs/8.x/broadcasting#pusher-channels",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pusher Channels"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Websocket driver for broadcasting")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel.com/docs/8.x/blade",target:"_blank",rel:"noopener noreferrer"}},[t._v("Blade"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Templating engine")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://nit-administrative-systems.github.io/northwestern-laravel-ui",target:"_blank",rel:"noopener noreferrer"}},[t._v("northwestern-laravel-ui"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Bootstrap 4 theme & layouts")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://yarnpkg.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Front-end package management")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://getbootstrap.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bootstrap 4"),e("OutboundLink")],1),t._v(" "),e("sup",[t._v("*")])]),t._v(" "),e("td",[t._v("General purpose UI toolkit")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://fontawesome.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Font Awesome"),e("OutboundLink")],1),t._v(" "),e("sup",[t._v("*")])]),t._v(" "),e("td",[t._v("Icons")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://phpunit.de/",target:"_blank",rel:"noopener noreferrer"}},[t._v("PHPUnit"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Unit & feature testing")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel-livewire.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Livewire"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Rich UI")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel.com/docs/8.x/dusk",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Dusk"),e("OutboundLink")],1),t._v(" "),e("em",[t._v("(Selenium)")])]),t._v(" "),e("td",[t._v("Functional & E2E testing")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/getsentry/sentry-php",target:"_blank",rel:"noopener noreferrer"}},[t._v("sentry-php"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("Exception logging (backend)")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://www.npmjs.com/package/@sentry/browser",target:"_blank",rel:"noopener noreferrer"}},[t._v("@sentry/browser"),e("OutboundLink")],1),t._v(" †")]),t._v(" "),e("td",[t._v("Exception logging (frontend)")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://laravel.com/docs/8.x/horizon",target:"_blank",rel:"noopener noreferrer"}},[t._v("Horizon"),e("OutboundLink")],1),t._v(" with Redis")]),t._v(" "),e("td",[t._v("Queues & async processing (on-prem)")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://github.com/laravel/vapor-ui",target:"_blank",rel:"noopener noreferrer"}},[t._v("vapor-ui"),e("OutboundLink")],1),t._v(" with Amazon SQS")]),t._v(" "),e("td",[t._v("Queues & async processing (AWS)")])]),t._v(" "),e("tr",[e("td",[t._v("Apache & PHP-FPM")]),t._v(" "),e("td",[t._v("On-prem deployment")])]),t._v(" "),e("tr",[e("td",[e("a",{attrs:{href:"https://vapor.laravel.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Vapor"),e("OutboundLink")],1)]),t._v(" "),e("td",[t._v("AWS serverless deployment")])])])]),t._v(" "),e("p",[e("small",[e("sup",[t._v("*")]),t._v(" The "),e("code",[t._v("northwestern-laravel-ui")]),t._v(" package will set up Bootstrap & Font Awesome.")])]),t._v(" "),e("p",[e("small",[t._v("† The "),e("code",[t._v("northwestern-laravel-ui")]),t._v(" package includes Sentry's browser SDK and will auto-configure it based on the settings for "),e("code",[t._v("sentry-php")]),t._v(".")])]),t._v(" "),e("h2",{attrs:{id:"frontend"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#frontend"}},[t._v("#")]),t._v(" Frontend")]),t._v(" "),e("p",[t._v("For applications, this stack uses Bootstrap with an NU theme. This does not try to replicate the look of the "),e("a",{attrs:{href:"https://www.northwestern.edu/templates/v3/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NU Department Templates"),e("OutboundLink")],1),t._v(", but still gives you an obviously-NU-branded look & feel.")]),t._v(" "),e("p",[t._v("Bootstrap is our tool of choice here because it is providing a large number of ready-made UI components that have been tested cross-browser & for accessibility. This allows developers to focus on the custom business logic for their application instead of CSS arcana.")]),t._v(" "),e("p",[t._v("For AJAX-y things you'd typically achieve with jQuery, instead consider Livewire. Livewire enables us to write rich AJAX-y UIs entirely in PHP and Blade. This makes the application more testable (PHPUnit can test this code), and transfers competency with PHP & Blade to the frontend instead of requiring you to write JavaScript.")]),t._v(" "),e("p",[t._v("Note that "),e("a",{attrs:{href:"http://localhost:8080/AS-CloudDocs/development/frontend-stacks.html#phasing-out-jquery",target:"_blank",rel:"noopener noreferrer"}},[t._v("the use of jQuery should be phased out"),e("OutboundLink")],1),t._v(" across all applications.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Easing in to Livewire")]),t._v(" "),e("p",[t._v("Livewire is not a replacement for a frontend framework. It does not take control of the entire frontend.")]),t._v(" "),e("p",[t._v("You can begin adding Livewire to an existing Laravel application gradually. If a developer is working on a new feature, they can add a Livewire component without disrupting any of the existing functionality.")])]),t._v(" "),e("p",[t._v("Livewire is not appropriate for all tasks jQuery is used for. If you need to do something purely client-side in the browser, it is recommended to write 'vanilla' JavaScript without depending on any additional libraries/frameworks.")]),t._v(" "),e("h2",{attrs:{id:"repositories"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#repositories"}},[t._v("#")]),t._v(" Repositories")]),t._v(" "),e("p",[t._v("In a normal Laravel app, you are assumed to have a relational database. "),e("a",{attrs:{href:"https://laravel.com/docs/8.x/eloquent",target:"_blank",rel:"noopener noreferrer"}},[t._v("Eloquent"),e("OutboundLink")],1),t._v(" is an active record ORM, so models encapsulate both your domain models (e.g. attributes & method you add) and the data storage logic ("),e("code",[t._v("save()")]),t._v(", "),e("code",[t._v("find()")]),t._v(", etc).")]),t._v(" "),e("p",[t._v("In some situations, it is better to hide the details of data storage with a repository class:")]),t._v(" "),e("ul",[e("li",[t._v("The logic is complicated and thus should not live in your controller")]),t._v(" "),e("li",[t._v("The model isn't stored in your database (and thus is not an Eloquent model)")])]),t._v(" "),e("p",[t._v("If you have used Hibernate in Java, a repository is essentially a "),e("a",{attrs:{href:"https://en.wikipedia.org/wiki/Data_access_object",target:"_blank",rel:"noopener noreferrer"}},[t._v("data access object"),e("OutboundLink")],1),t._v(": a dedicated class that reads & writes models from storage. The storage could be anything: a database, an API, or a cache. The model and all of its business logic is a separate object that you pass in & get out of the repository.")]),t._v(" "),e("p",[t._v("A repository method should not be aware of any validation logic, business logic, roles, or privileges. All of the data it needs should be validated elsewhere & passed in. The method should only be invoked if it is appropriate to do so.")]),t._v(" "),e("p",[t._v("The only logic included in a repository should be related to persisting data -- e.g. if we specify "),e("code",[t._v("column_a")]),t._v(", then "),e("code",[t._v("column_b")]),t._v(" should be nulled out, or if "),e("code",[t._v("column_c")]),t._v(" has changed we should add an entry to "),e("code",[t._v("audit_log")]),t._v(".")]),t._v(" "),e("p",[t._v("We keep the repositories in "),e("code",[t._v("app/Repositories")]),t._v(". Methods should return the relevant model w/ its updates. Whenever possible, complex write operations should be wrapped in a transaction.")]),t._v(" "),e("details",{staticClass:"custom-block details"},[e("summary",[t._v("Eloquent Repository Example")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Repositories")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Carbon"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Carbon")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExampleRepository")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateStatus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("Application")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("Status")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name return-type"}},[t._v("Application")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("DB")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transaction")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("associate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_at_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("milestone_timestamp_column")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_at_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_at_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name static-context"}},[t._v("Carbon")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("::")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("now")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_by_user_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("milestone_track_user_id_column")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_by_user_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$milestone_by_user_column")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n            "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Update the updated_at timestamp on the underlying app")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("application")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("touch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("refresh")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("details",{staticClass:"custom-block details"},[e("summary",[t._v("API Repository Example")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Repositories")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("API"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("ExternalAPI")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Application")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ExampleRepository")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("__construct")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("ExternalAPI")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("api")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$api")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword type-hint"}},[t._v("string")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name return-type"}},[t._v("Application")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Logic for re-trying & auth should live in your API binding class")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$raw_data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("api")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Hydrate & return a model")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Application")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$raw_data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateStatus")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("Application")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name type-declaration"}},[t._v("Status")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user_id")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token constant"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name return-type"}},[t._v("Application")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("api")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token string single-quoted-string"}},[t._v("'status_id'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$status")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("h2",{attrs:{id:"deploying"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deploying"}},[t._v("#")]),t._v(" Deploying")]),t._v(" "),e("p",[t._v("Laravel apps can be deployed on-premise (legacy applications) or on AWS.")]),t._v(" "),e("p",[t._v("When on-prem, the servers are Cyberinfrastructure-supported RedHat Enterprise Linux VMs. The latest version of PHP available in the RedHat Software Collections (RHSCL) should be used.")]),t._v(" "),e("p",[t._v("For cloud deployments, we use Laravel Vapor to deploy onto AWS. Please see the article on "),e("RouterLink",{attrs:{to:"/infrastructure/vapor.html"}},[t._v("Vapor under the infrastructure section")]),t._v(" for more information about deploying with Vapor.")],1)])}),[],!1,null,null,null);a.default=n.exports}}]);