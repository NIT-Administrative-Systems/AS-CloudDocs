(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{385:function(t,s,a){"use strict";a.r(s);var e=a(41),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"available-modules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#available-modules"}},[t._v("#")]),t._v(" Available Modules")]),t._v(" "),a("p",[t._v("The EACD-CloudOps teams maintains "),a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("several modules"),a("OutboundLink")],1),t._v(" for common functionality / app designs. As new patterns are identified, modules will be added.")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/tree/stable/alb",target:"_blank",rel:"noopener noreferrer"}},[t._v("Application Load Balancer"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/blob/stable/entapp_certificate",target:"_blank",rel:"noopener noreferrer"}},[t._v("Certificates for "),a("code",[t._v("entapp.northwestern.edu")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/tree/stable/opsgenie",target:"_blank",rel:"noopener noreferrer"}},[t._v("OpsGenie Integration for CloudWatch Alarms"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/blob/stable/private_subnet",target:"_blank",rel:"noopener noreferrer"}},[t._v("Private Subnet Assignment"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-fargate-modules/tree/master",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fargate Task"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/NIT-Administrative-Systems/AS-fargate-modules/tree/master",target:"_blank",rel:"noopener noreferrer"}},[t._v("Fargate Service"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("All teams are welcome to use these modules. Support can be provided by the EACD-CloudOps group.")]),t._v(" "),a("h2",{attrs:{id:"using-a-module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-a-module"}},[t._v("#")]),t._v(" Using a Module")]),t._v(" "),a("p",[t._v("To use one of these modules, you can put a reference to Github in as the local module's source:")]),t._v(" "),a("div",{staticClass:"language-hcl extra-class"},[a("pre",{pre:!0,attrs:{class:"language-hcl"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("module"),a("span",{pre:!0,attrs:{class:"token type variable"}},[t._v(' "alb" ')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The double slash IS significant <https://www.terraform.io/docs/modules/sources.html#modules-in-package-sub-directories>")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("source")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules//alb?ref=tf-0.12"')]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("region")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"us-east-2"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("account_label")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.account_label\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("vpc_id")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.vpc_id\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("subnets")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" var.alb_subnets\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("The repository is private, so you will need to make Github credentials available to "),a("code",[t._v("terraform init")]),t._v(" in your Jenkins pipeline:")]),t._v(" "),a("div",{staticClass:"language-groovy extra-class"},[a("pre",{pre:!0,attrs:{class:"language-groovy"}},[a("code",[t._v("stage "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Init'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    steps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withCredentials")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("usernamePassword")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("credentialsId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GitHub-awsCloudOpsCJT'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" passwordVariable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GITHUB_PASSWORD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" usernameVariable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GITHUB_USERNAME'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AmazonWebServicesCredentialsBinding'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" accessKeyVariable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AWS_ACCESS_KEY_ID'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" credentialsId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'terraform'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" secretKeyVariable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AWS_SECRET_ACCESS_KEY'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Need to set up the Git credential helper since terraform init will be cloning the shared modules itself")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Kinda kludgey that the pipeline has to permit the module URLs, but :/")]),t._v("\n            sh "),a("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('"""export GITHUB_USERNAME=\''),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GITHUB_USERNAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v("' &&\n            export GITHUB_PASSWORD='"),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GITHUB_PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v('\' &&\n            git config --global credential.https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules.git.helper \'!f() { echo "username="""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${GITHUB_USERNAME}'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('""""; echo "password="""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'${GITHUB_PASSWORD}'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string gstring"}},[t._v('""""; }; f\' &&\n            cd ./'),a("span",{pre:!0,attrs:{class:"token expression"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("build_env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(' &&\n            terraform init -no-color &&\n            git config --global --unset credential.https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules.git.helper\n            """')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);