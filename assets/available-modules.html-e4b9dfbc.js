import{_ as t,M as o,p as i,q as p,R as n,t as s,N as e,a1 as l}from"./framework-bf3e1922.js";const r={},c=n("h1",{id:"available-modules",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#available-modules","aria-hidden":"true"},"#"),s(" Available Modules")],-1),u={href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/tree/stable/alb",target:"_blank",rel:"noopener noreferrer"},m={href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/blob/stable/entapp_certificate",target:"_blank",rel:"noopener noreferrer"},k=n("code",null,"entapp.northwestern.edu",-1),v={href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/tree/stable/opsgenie",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules/blob/stable/private_subnet",target:"_blank",rel:"noopener noreferrer"},h={href:"https://github.com/NIT-Administrative-Systems/AS-fargate-modules/tree/master",target:"_blank",rel:"noopener noreferrer"},g={href:"https://github.com/NIT-Administrative-Systems/AS-fargate-modules/tree/master",target:"_blank",rel:"noopener noreferrer"},_=l(`<p>All teams are welcome to use these modules. Support can be provided by the EACD-CloudOps group.</p><h2 id="using-a-module" tabindex="-1"><a class="header-anchor" href="#using-a-module" aria-hidden="true">#</a> Using a Module</h2><p>To use one of these modules, you can put a reference to Github in as the local module&#39;s source:</p><div class="language-hcl line-numbers-mode" data-ext="hcl"><pre class="language-hcl"><code><span class="token keyword">module<span class="token type variable"> &quot;alb&quot; </span></span><span class="token punctuation">{</span>
    <span class="token comment">// The double slash IS significant &lt;https://www.terraform.io/docs/modules/sources.html#modules-in-package-sub-directories&gt;</span>
    <span class="token property">source</span> <span class="token punctuation">=</span> <span class="token string">&quot;github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules//alb?ref=tf-0.12&quot;</span>

    <span class="token property">region</span> <span class="token punctuation">=</span> <span class="token string">&quot;us-east-2&quot;</span>
    <span class="token property">account_label</span> <span class="token punctuation">=</span> var.account_label
    <span class="token property">vpc_id</span> <span class="token punctuation">=</span> var.vpc_id
    <span class="token property">subnets</span> <span class="token punctuation">=</span> var.alb_subnets
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The repository is private, so you will need to make Github credentials available to <code>terraform init</code> in your Jenkins pipeline:</p><div class="language-groovy line-numbers-mode" data-ext="groovy"><pre class="language-groovy"><code>stage <span class="token punctuation">(</span><span class="token string">&#39;Init&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    steps <span class="token punctuation">{</span>
        <span class="token function">withCredentials</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
            <span class="token function">usernamePassword</span><span class="token punctuation">(</span>credentialsId<span class="token punctuation">:</span> <span class="token string">&#39;GitHub-awsCloudOpsCJT&#39;</span><span class="token punctuation">,</span> passwordVariable<span class="token punctuation">:</span> <span class="token string">&#39;GITHUB_PASSWORD&#39;</span><span class="token punctuation">,</span> usernameVariable<span class="token punctuation">:</span> <span class="token string">&#39;GITHUB_USERNAME&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token punctuation">$</span><span class="token keyword">class</span><span class="token punctuation">:</span> <span class="token string">&#39;AmazonWebServicesCredentialsBinding&#39;</span><span class="token punctuation">,</span> accessKeyVariable<span class="token punctuation">:</span> <span class="token string">&#39;AWS_ACCESS_KEY_ID&#39;</span><span class="token punctuation">,</span> credentialsId<span class="token punctuation">:</span> <span class="token string">&#39;terraform&#39;</span><span class="token punctuation">,</span> secretKeyVariable<span class="token punctuation">:</span> <span class="token string">&#39;AWS_SECRET_ACCESS_KEY&#39;</span><span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Need to set up the Git credential helper since terraform init will be cloning the shared modules itself</span>
            <span class="token comment">// Kinda kludgey that the pipeline has to permit the module URLs, but :/</span>
            sh <span class="token interpolation-string"><span class="token string">&quot;&quot;&quot;export GITHUB_USERNAME=&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">GITHUB_USERNAME</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; &amp;&amp;
            export GITHUB_PASSWORD=&#39;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">GITHUB_PASSWORD</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&#39; &amp;&amp;
            git config --global credential.https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules.git.helper &#39;!f() { echo &quot;username=&quot;&quot;&quot;</span></span> <span class="token operator">+</span> <span class="token string">&#39;\${GITHUB_USERNAME}&#39;</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;&quot;&quot;; echo &quot;password=&quot;&quot;&quot;</span></span> <span class="token operator">+</span> <span class="token string">&#39;\${GITHUB_PASSWORD}&#39;</span> <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;&quot;&quot;; }; f&#39; &amp;&amp;
            cd ./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token expression">build_env</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> &amp;&amp;
            terraform init -no-color &amp;&amp;
            git config --global --unset credential.https://github.com/NIT-Administrative-Systems/AS-Common-AWS-Modules.git.helper
            &quot;&quot;&quot;</span></span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6);function S(f,A){const a=o("ExternalLinkIcon");return i(),p("div",null,[c,n("p",null,[s("The EACD-CloudOps teams maintains "),n("a",u,[s("several modules"),e(a)]),s(" for common functionality / app designs. As new patterns are identified, modules will be added.")]),n("ul",null,[n("li",null,[n("a",d,[s("Application Load Balancer"),e(a)])]),n("li",null,[n("a",m,[s("Certificates for "),k,e(a)])]),n("li",null,[n("a",v,[s("OpsGenie Integration for CloudWatch Alarms"),e(a)])]),n("li",null,[n("a",b,[s("Private Subnet Assignment"),e(a)])]),n("li",null,[n("a",h,[s("Fargate Task"),e(a)])]),n("li",null,[n("a",g,[s("Fargate Service"),e(a)])])]),_])}const q=t(r,[["render",S],["__file","available-modules.html.vue"]]);export{q as default};
