import{_ as s,M as r,p as n,q as c,R as e,t,N as a,V as l,a1 as d}from"./framework-bf3e1922.js";const h="/AS-CloudDocs/assets/cert-validation-flow-798d6827.png",u="/AS-CloudDocs/assets/cert-validation-ec0a4378.png",f={},p=e("h1",{id:"certificates",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#certificates","aria-hidden":"true"},"#"),t(" Certificates")],-1),m={href:"https://docs.aws.amazon.com/acm/latest/userguide/acm-overview.html",target:"_blank",rel:"noopener noreferrer"},_=e("p",null,"You should always request certificates from Amazon through ACM for cloud applications. The EACD-CloudOps group does not recommend or support importing certificates issued by other CAs.",-1),g={href:"https://www.troyhunt.com/extended-validation-certificates-are-really-really-dead/",target:"_blank",rel:"noopener noreferrer"},w={href:"https://www.ssl.com/faqs/what-is-a-san-certificate/",target:"_blank",rel:"noopener noreferrer"},b={href:"https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-basic-concept.html#apigateway-definition-edge-optimized-api-endpoint",target:"_blank",rel:"noopener noreferrer"},y=e("code",null,"us-east-1",-1),C=e("code",null,"us-east-2",-1),v=e("code",null,"us-east-1",-1),A=e("h2",{id:"usage",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#usage","aria-hidden":"true"},"#"),t(" Usage")],-1),k=e("p",null,"Obtaining a certificate is a multi-step process.",-1),q=e("p",null,[e("img",{src:h,alt:"Certificate request flow"})],-1),N={href:"https://www.terraform.io/docs/providers/aws/r/acm_certificate.html",target:"_blank",rel:"noopener noreferrer"},S={class:"hint-container tip"},x=e("p",{class:"hint-container-title"},"entapp",-1),z=e("p",null,[t("The "),e("code",null,"entapp.northwestern.edu"),t(" zone is managed by the EACD-CloudOps team.")],-1),T=e("code",null,"entapp",-1),D=d('<p>When you create a certificate request, ACM requires you to prove that you own the domain(s) you are requesting a certificate for. Until this is done, ACM will not create a certificate &amp; attempting to reference the ARN in terraform will fail.</p><p>The request will be visible in the ACM console, at the &#39;Pending Validation&#39; status. Amazon will ask you to create a subdomain for each domain you&#39;ve requested a certificate for. Being able to create a subdomain on the requested domain(s) proves that you control that domain.</p><p><img src="'+u+'" alt="ACM certificate request"></p><p>You will need to open a ticket for <code>NUIT-CI-SO-SOC</code> asking to create these DNS records for you:</p><blockquote> Hi SOC, <br><br> Can you please create the following new CNAME for AWS cert validation: <br><br> CNAME: _d6486a2a6c2aecc5999c9263cd6ca914.as-ado-test.northwestern.edu.<br> Target: _da2e93d6b676aad059a9995c82895502.mzlfeqexyx.acm-validations.aws. <br><br> Note that the leading underscores are significant; please make sure they get copy-pasted! <br><br> Thank you for your help. </blockquote><p>This must be completed within 72 hours or Amazon will abandon the certificate request. If that happens, you will need to delete the request and start over.</p><p>The DNS records created are <strong>only</strong> for establishing ownership of the domain and issuing the certificates. These records will not set up DNS for <code>as-ado-test.northwestern.edu</code>; you will need to make a separate request for that.</p><p>These records must remain in DNS for the lifetime of the certificate. AWS re-checks them when it comes time to renew the certificate.</p>',8);function V(M,E){const o=r("ExternalLinkIcon"),i=r("RouterLink");return n(),c("div",null,[p,e("p",null,[t("Amazon provides X.509 certificates, most commonly used for HTTPS, through the "),e("a",m,[t("AWS Certificate Manager"),a(o)]),t(" (ACM). Any certificates issued by Amazon will be short-lived auto-renewed certificates, eliminating the need for a bunch of manual configuration & webserver restarts.")]),_,e("p",null,[t("Amazon will only issue Domain Verified (DV) certificates. Issuing & renewing Extended Validation (EV) certificates cannot be automated, and "),e("a",g,[t("no longer offer any benefit"),a(o)]),t(" over DV certs.")]),e("p",null,[t("You may request a "),e("a",w,[t("SAN certificate"),a(o)]),t(" that covers several domains; this is useful for a single ALB listener that covers multiple environments.")]),e("p",null,[t("Any certificate that will be used by CloudFront or an edge-optimzed API gateway ("),e("a",b,[t("which is using CloudFront"),a(o)]),t(") must be created in the "),y,t(" region. Your app can exist in "),C,t(", but CloudFront is a global service and it replicates all of its data from "),v,t(".")]),A,k,q,e("p",null,[t("Certificate requests should be made as IaC "),e("a",N,[t("with terraform"),a(o)]),t(".")]),e("div",S,[x,z,e("p",null,[t("We offer an "),a(i,{to:"/iac/available-modules.html"},{default:l(()=>[T,t(" certificate module")]),_:1}),t(", and can offer expedited processing on DNS requests for this zone.")])]),D])}const O=s(f,[["render",V],["__file","certificates.html.vue"]]);export{O as default};
